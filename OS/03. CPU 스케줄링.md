# Chapter 11 : CPU 스케줄링

## CPU 스케줄링 개요

- 모든 프로세스는 CPU를 필요로 하고, 모든 프로세스는 CPU를 점유하고 싶어 한다.
- 이러한 프로세스들에게 공정하고 합리적으로 CPU 자원을 할당하기 위해, 운영체제는 계획을 세운다.
- 이렇게 운영체제가 프로세스들에게 CPU 자원을 합리적으로 배분하는 것을 **CPU 스케줄링**이라고 한다.
- CPU 스케줄링이 현명한 것이 컴퓨터 성능과도 직결된다.

### 프로세스 우선순위

- 프로세스마다 **우선순위**가 다르기 때문에, 대기열을 선 프로세스들을 순차적으로 CPU를 할당시켜주는 것은 좋지 않다.
- 우선순위가 높은 프로세스에는 대표적으로 입출력 작업이 많은 프로세스가 있다.
- 비디오 재생, 디스크 백업 작업 등의 프로세스들은 입출력 작업이 많은, **입출력 집중 프로세스**이다.
- 복잡한 수학 연산, 컴파일, 그래픽 처리 등의 프로세스들은 CPU 작업이 많은, **CPU 집중 프로세스**이다.
- 입출력 집중 프로세스는 실행 상태보단 입출력 대기 상태에 더 많이 머무른다. (입출력 버스트)
- CPU 집중 프로세스는 대기 상태보다는 실행 상태에 더 많이 머무른다. (CPU 버스트)
- 따라서 입출력 집중 프로세스를 먼저 처리해준 뒤, 입출력 집중 프로세스가 대기 상태에 들어가 있는 동안 나머지 시간을 CPU 집중 프로세스에게 할당하는 것이 효율적이다.
- 프로세스의 상황, 중요도에 맞게 먼저 CPU를 이용할 수 있도록 운영체제는 프로세스마다 **우선순위**(Priority)를 부여한다.
- 운영체제는 각 프로세스의 PCB에 우선순위를 명시하고, 우선순위가 높은 프로세스는 더 빨리, 자주 실행된다.

### 스케줄링 큐

- PCB에 우선순위가 적혀있지만, 운영체제가 일일이 모든 프로세스의 PCB를 조회하는 것은 비효율적이다.
- 또한 CPU뿐만이 아닌, 메모리나 하드 디스크를 쓰고싶어하는 프로세스도 얼마든 있어 매번 모든 PCB를 검사하는 것은 비효율적이다.
- 그래서 운영체제는 프로세스들에게 줄을 세운다. 그리고 이 줄을 **스케줄링 큐**(Scheduling Queue)로 구현하고 관리한다.
  - 여기서의 큐는 반드시 선입선출 방식일 필요는 없다.
- 스케줄링 큐(프로세스 줄)는 CPU를 쓰고싶은, 하드 디스크를 쓰고싶은, 메모리를 쓰고싶은 등 요구하는 자원별로 존재한다.
- 운영체제가 관리하는 줄, 즉 큐에는 다양한 종류가 있다.
  - **준비 큐**는 CPU를 이용하고 싶은 프로세스들이 서는 줄이다.
  - **대기 큐**는 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄이다.
- 우선순위가 낮은 프로세스가 먼저 큐에 삽입되어도, 우선순위가 높은 프로세스가 먼저 처리될 수 있다.
- 입출력 완료 인터럽트가 발생하면 운영체제는 대기 큐에서 작업이 완료된 PCB를 찾고, 그 프로세스를 준비 상태로 변경한 뒤 대기 큐에서 제거하고 준비 큐로 삽입한다.

### 선점형과 비선점형 스케줄링

- 어떤 프로세스가 CPU를 점령하고 있을 때, 급한 프로세스가 CPU를 갑자기 요청할 경우
  - 프로세스가 CPU를 비롯한 자원을 사용하고 있더라도, 운영체제가 자원을 강제로 빼앗아 할당해주는 **선점형 스케줄링**방식이 있다.
  - 프로세스가 자원을 사용하고 있다면 스스로 종료되거나 대기 상태가 될 때까지 다른 프로세스가 낄 수 없는 **비선점형 스케줄링** 방식이 있다.
- 현재 대부분 운영체제는 선점형 스케줄링이다.
- 선점형 스케줄링은 급한 프로세스에게 즉시 자원을 줄 수 있어 자원 독점을 막고 골고루 배분이 가능하지만, 문맥 교환 과정에서 오버헤드가 발생하기 쉽다.
- 비전섬형 스케줄링은 문맥 교환 과정에서 오버헤드가 비교적 적지만, 모든 프로세스가 자원을 골고루 사용하기 어렵다.

## CPU 스케줄링 알고리즘

- CPU 스케줄링 알고리즘의 종류는 매우 방대하고, 운영체제마다 달라 모두 암기하지 않아도 된다.

### 스케줄링 알고리즘의 종류

