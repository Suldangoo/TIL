# Chapter 15 : 파일 시스템

## 파일과 디렉터리

- 우리가 당연하게 사용하는 **파일**과 **디렉터리**는 모두 운영체제 내부 파일 시스템이 관리하는 존재이다.
- 파일과 디렉터리는 모두 보조기억장치에 있는 데이터 덩어리인데, 이를 어떻게 파일과 디렉터리로서 관리하는지가 **파일 시스템**의 핵심이다.

### 파일

- 우리가 일상적으로 컴퓨터를 이용할 땐 파일 단위로 이용한다.
- **파일**(File)이란 하드 디스크나 SSD와 같은 보조기억장치에 저장된 관련 정보의 집합을 의미한다.
- 의미 있고 관련 있는 정보를 모은 논리적 단위를 의미한다.
- 모든 파일에는 이름과 파일을 실행하기 위한 정보, 그리고 파일 관련 부가 정보가 있다. 이 부가 정보를 **속성** 또는 **메타데이터**라고 부른다.
- 파일을 우클릭하여 속성을 살펴보면, 파일 형식이나 위치, 크기 등 다양한 정보가 나오는데, 이러한 정보가 **파일 속성**이다.
- **파일 속성과 유형**
  - 운영체제마다 유지하는 파일 속성은 조금씩 다르지만 대표적인 속성은 다음과 같다.
    - 유형, 크기, 보호, 생성 날짜, 마지막 접근/수정 날짜, 생성자, 소유자, 위치
  - **파일 유형**은 운영체제가 인식하는 파일 종류를 나타낸다.
  - 같은 이름의 파일이어도 텍스트, 실행, 음악 파일 등 유형이 다르면 실행 양상이 달라진다.
  - 파일 유형을 알리기 위해 가장 흔히 사용하는 방식은 이름 뒤에 붙는 확장자(Extension)을 이용하는 것이다. 파일 종류를 알려주는 힌트와도 같다.
- **파일 연산을 위한 시스템 호출**
  - 파일을 다루는 모든 작업은 운영체제에 의해 이뤄진다. 어떤 응용 프로그램도 파일을 임의로 조작할 수 없으며, 파일을 다루려면 운영체제에 부탁해야 한다.
  - 이를 위해 운영체제는 다음과 같은 파일 연산을 위한 시스템 호출을 제공한다.
    - 파일 생성, 삭제, 열기, 닫기, 읽기, 쓰기

### 디렉터리

- 파일들을 일목요연하게 관리하기 위해 **디렉터리**(Directory)를 이용한다.
- 윈도우에서는 디렉터리를 **폴더**(Folder)라고 부른다.
- 옛날 운영체제에는 하나의 디렉터리만 존재했고, 모든 파이링 하나의 디렉터리 안에 전부 담겨있었다. 이런 구조를 **1단계 디렉터리**라고 부른다.
- 하지만 실제로 이런 컴퓨터는 이제 거의 없고, 용량이 커지다 보니 저장할 수 있는 파일이 많아져 1단계 디렉터리로는 파일 관리가 어려워졌다.
- 때문에 여러 계층을 가진 **트리 구조 디렉터리**가 생겨났다.
- 트리 구조 디렉터리는 최상위 디렉터리인 **루트 디렉터리**(/)가 있고, 그 아래 여러 서브 디렉터리(자식 디렉터리)가 있다. 서브 디렉터리는 또 다른 서브 디렉터리를 가질 수 있다.
- 이렇게 디렉터리가 계층적으로 있다 보니 생긴 개념이 **경로**(Path)이다.
  - 경로는 디렉터리를 이용해 파일 위치, 파일 이름을 특정짓는 정보이다.
- **절대 경로와 상대 경로**
  - 같은 디렉터리에는 동일한 이름의 파일이 존재할 수 없지만, 서로 다른 디렉터리에는 동일한 이름의 파일이 존재할 수 있다.
  - 루트 디렉터리부터 파일까지 경로가 다르기 때문에 동일한 이름임에도 공존할 수 있는 것이다.
  - 모든 파일은 루트 디렉터리부터 자기 자신까지 이르는 고유한 경로를 가지고 있고, 이를 **절대 경로**(Absolute Path)라고 한다.
  - 경로를 나타내는 또 다른 대중적 방식으로는 **상대 경로**(Relative Path)가 있다.
  - 상대 경로는 현재 디렉터리부터 시작하는 경로이다.
- **디렉터리 연산을 위한 시스템 호출**
  - 운영체제가 파일 연산을 위한 시스템 호출을 제공하듯이, 디렉터리 연산을 위한 시스템 호출 또한 제공한다.
    - 디렉터리 생성, 삭제, 열기, 닫기, 읽기
- **디렉터리 엔트리**
  - 파일과 디렉터리는 엄연히 다른 별개의 존재라고 생각할 수 있으나, 사실 많은 운영체제는 디렉터리를 그저 특별한 형태의 파일로 간주한다.
  - 즉, 디렉터리도 파일이다. 다만 포함한 정보가 조금 특별할 뿐이다.
  - 파일은 내부에 해당 파일과 관련된 정보를 담고 있다면, 디렉터리는 내부에 해당 디렉터리에 담겨 있는 대상과 관련된 정보를 담고 있다.
  - 보통 이 정보는 테이블(표) 형태로 구성되어있다.
  - 여러 파일 시스템마다 테이블 각각의 엔트리(행)의 구성이 다른데, 거의 모든 파일 시스템이 공통적으로 포함하는 정보는 디렉터리에 포함된 **대상의 이름**과, 그 대상이 보조기억장치 내에 **저장된 위치를 유추할 수 있는 정보**가 담긴다는 것이다.
- 테이블의 엔트리엔 ..(상위 디렉터리)와 .(현재 디렉터리)와 해당 디렉터리 내부에 있는 파일 혹은 디렉터리의 정보가 담겨있다.
- 참고로 루트 디렉터리는 부모 디렉터리가 없어서, 루트 디렉터리의 ..은 자기 자신을 의미한다.

## 파일 시스템

- **파일 시스템**은 파일과 디렉터리를 보조기억장치에 일목요연하게 저장하고 접근할 수 있게 하는 운영체제 내부 프로그램이다.

### 파티셔닝과 포매팅

- 막 공장에서 생성된 하드 디스크나 SSD는 곧바로 사용할 수 없는데, **파티션**을 나누는 작업인 **파티셔닝**과 **포맷** 작업(**포매팅**)을 거쳐야 하기 때문이다.
- **파티셔닝**은 저장 장치의 논리적인 영역을 구획하는 작업을 의미한다.
- 저장 장치에 칸막이들을 세워 정리하기 쉽게끔 구역을 나누는 것이다.
- 이렇게 나누어진 영역 하나하나를 **파티션**(Partition)이라고 한다.
- 포맷 작업, 즉 **포매팅**은 저장 장치를 완전히 삭제하는 것으로 사람들이 알고 있지만, 사실 이는 정확한 표현이 아니다.
- 포매팅이란 파일 시스템을 설정하여 어떤 방식으로 파일을 저장하고 관리할지 설정하고, 새로운 데이터를 쓸 준비를 하는 작업을 의미한다.
  - 포매팅의 종류를 엄밀히 나누자면 **저수준 포매팅**과 **논리적 포매팅**이 있다. 저수준 포매팅은 저장 장치를 생성하는 공장에서 수행되는 물리적 포매팅이고, 후자는 파일 시스템을 생성하는 포매팅이다.
- 즉, 포매팅을 하면 그 때 파일 시스템이 결정된다.
- 파일 시스템엔 여러 종류가 있고, 파티션마다 다른 파일 시스템을 설정할 수 있다.
- 파티셔닝과 포매팅을 완료하면 파일과 디렉터리를 생성할 수 있다.

