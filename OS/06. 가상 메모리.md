# Chapter 14 : 가상 메모리

## 연속 메모리 할당

- 지금까지는 메모리 내에 프로세스가 연속적으로 배치되는 상황을 가정했고, 이 방식은 **연속 메모리 할당** 방식이라고 한다.

### 스와핑

- 메모리에 적재된 프로세스들 중에서는 현재 실행되지 않는 프로세스가 있을 수 있다.
  - 입출력 작업으로 대기 상태가 되었거나, 오랫동안 사용되지 않은 프로세스들.
- 이런 프로세스들을 임시로 보조기억장치 일부 영역으로 쫓아내고, 그 빈 자리를 다른 프로세스로 채워 실행하는 방식을 **스와핑**이라고 한다.
- 이 때 프로세스들이 쫒겨나는 보조기억장치 일부 영역을 **스왑 영역**이라고 한다.
- 현재 실행되지 않은 프로세스가 메모리에서 스왑 영역으로 옮겨지는 것을 **스왑 아웃**, 반대로 스왑 영역에 있던 프로세스가 다시 메모리로 옮겨오는 것을 **스왑 인**이라고 한다.
- 스왑 아웃된 프로세스가 다시 스왑 인 될때는 스왑 아웃되기 전의 물리 주소와 다른 주소에 적재될 수 있다.
- 스와핑을 이용하면 프로세스들이 요구하는 메모리 주소 공간의 크기가 실제 메모리 크기보다 큰 경우에도 프로세스들을 동시 실행할 수 있다.
  - 넘치는 부분을 스와핑하며 실행할 수 있기 때문이다.
- 유닉스, 리눅스, 맥에선 DOS 명령어를 통해 스왑 영역의 크기를 확인하고, 크기를 설정할 수 있다.

### 메모리 할당

- 프로세스는 메모리 내의 빈 공간에 적재되는데, 빈 공간이 여러 개 있을 경우 할당 방식이 다르다.
- 여기엔 대표적으로 최초 적합, 최적 적합, 최악 적합 세 가지 방식이 존재한다.
- **최초 적합**
  - 운영체제가 메모리 내의 빈 공간을 순서대로 검색하다가 적재할 수 있는 **공간이 발견되면** 그 공간에 프로세스를 배치하는 방식이다.
  - 검색을 최소화하고 결과적으로 빠른 할당이 가능하다.
  - 빈 공간이 비교적 큰 공간이더라도 일단 적재하게 된다.
- **최적 적합**
  - 운영체제가 빈 공간을 모두 검색해 본 후, 프로세스가 적재될 수 있는 공간 중 가장 **작은** 공간에 프로세스를 배치하는 방식이다.
  - 가장 크기에 알맞는 메모리에 적재 가능하지만, 메모리를 모두 검색하게 된다.
- **최악 적합**
  - 운영체제가 빈 공간을 모두 검색해 본 후, 프로세스가 적재될 수 있는 공간 중 가장 **큰** 공간에 프로세스를 배치하는 방식이다.
