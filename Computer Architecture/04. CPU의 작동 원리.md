# Chapter 04 : CPU의 작동 원리

## ALU와 제어장치
- CPU 내부에는 계산을 담당하는 ALU, 명령어를 읽고 해석하는 제어장치, 임시 저장 장치인 레지스터가 있다.
- 큰 개념은 Chapter 01 - 2에 있으므로 기억이 나지 않는다면 리마인드할 것.

### ALU
- ALU는 CPU에서 계산을 담당한다.
- ALU는 레지스터를 통해 피연산자를 두 개 받아들이고, 제어장치로부터 수행할 연산을 알려주는 제어 신호를 받아들인다.
- 받아들인 피연산자와 제어 신호에 따라 다른데, 연산을 수행한 결과는 특정 숫자나 문자가 될 수도 있으며, 메모리 주소가 될 수도 있다.
- 이 결괏값은 바로 메모리에 저장되지 않으며 일시적으로 레지스터에 저장된다.
- 그 외에도 ALU는 계산 결과와 더불어 **플래그**를 내보닌다.
- **플래그**
  - 이진수만 보고선 음양수를 판단하기 어렵기 때문에, 음수와 양수를 판단하기 위해 플래그를 사용한다.
  - 즉, ALU는 결괏값뿐만 아니라 연산 결과에 대한 추가 정보를 내보내야 할 때가 있다.
  - 예를 들어 방금 계산 결과는 음수라던가, 결괏값이 레지스터보다 클 때 오버플로우가 났다는 등의 추가 정보가 플래그이다.
- **플래그의 종류**
  - 부호 플래그 : 연산한 결과의 부호를 나타낸다. (부호 플래그가 1일땐 음수, 0일땐 양수)
  - 제로 플래그 : 연산 결과가 0인지 여부를 나타낸다. (제로 플래그가 1일땐 0, 0일땐 0이 아님)
  - 캐리 플래그 : 연산 결과 올림수나 빌림수가 발생했는지를 나타낸다. (캐리 플래그가 1일땐 발생, 0일땐 발생하지 않음)
  - 오버플로우 플래그 : 오버플로우가 발생했는지를 나타낸다. (오버플로우 플래그가 1일땐 발생, 0일땐 발생하지 않음)
  - 인터럽트 플래그 : 인터럽트가 가능한지를 나타낸다. (인터럽트 플래그가 1일땐 가능함, 0일땐 가능하지 않음)
  - 슈퍼바이저 플래그 : 커널 모드인지, 사용자 모드인지를 나타낸다. (슈퍼바이저 플래그가 1일땐 커널 모드, 0일땐 사용자 모드로 실행중)
- 발생한 플래그는 **플래그 레지스터**라는 이름의 레지스터에 저장된다.
- 이 밖에도 ALU 내부에는 가산기, 보수기, 시프터, 오버플로우 검출기 등의 회로가 존재한다.
### 제어장치
- 제어장치는 제어 신호를 내보내고, 명령어를 해석하는 부품이다.
- 제어 신호는 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호이다.
- 제어장치는 굉장히 정교하기 때문에, 받아들이고 내보내는 정보들이 굉장히 많다.
- **제어장치는 클럭 신호를 받아들인다.**
  - **클럭**이란 컴퓨터의 모든 부품들이 일정하게 움직일 수 있게 하는 시간 단위이다.
  - 하나의 명령어가 여러 클럭에 걸쳐 실행될 수도 있다.
- **제어장치는 해석해야 할 명령어를 받아들인다.**
  - CPU가 해석해야 할 명령어는 명령어 레지스터라는 특별한 레지스터에 저장된다.
  - 제어장치는 이 명령어 레지스터에서 해석할 명령어를 받아들이고 해석한 뒤, 제어 신호를 발생시켜 부품들에게 명령을 내린다.