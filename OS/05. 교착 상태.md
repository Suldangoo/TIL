# Chapter 13 : 교착 상태

## 교착 상태란

- 도로 위에서 차가 막혀 꼼짝도 못하고 마비된 상황이 종종 일어난다.
- 프로세스도 마찬가지인데, 두 개 이상의 프로세스가 각자 가지고 있는 자원을 무작정 기다린다면 그 어떤 프로세스도 더 이상 진행할 수 없는 **교착 상태**가 된다.

### 식사하는 철학자 문제

- **식사하는 철학자 문제**는 교착 상태를 설명하기 위한 고전적이고 재밌는 문제 상황이다.
- 왜 교착 상태가 발생하는지, 나아가 교착 상태를 어떻게 해결하는지 알려준다.
- 다섯 명의 철학자가 동그란 식탁에 앉아 식사를 먹으려고 하는데, 포크가 두 개 필요한 상황에서 식사 가운데에 포크가 하나씩 다섯개가 있다면, 철학자들은 하나의 포크를 들 수는 있지만 다음 포크를 무한정 기다리게 되므로 누구도 식사를 할 수 없게 된다.
- 이렇게 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상을 **교착 상태**(**Deadlock**)이라고 한다.
- 위 문제에서 철학자는 프로세스 혹은 스레드, 포크는 자원, 생각하는 행위는 자원을 기다리는 것에 빗대어 볼 수 있으며 포크는 한 번에 하나의 프로세스 혹은 스레드만 접근할 수 있으니 임계 구역이라고 볼 수 있다.
- 게임 프로세스가 자원 A를, 웹 프로세스가 자원 B를 점유한 상태에서 게임 프로세스가 자원 B를, 웹 프로세스가 자원 A를 기다리게 된다면 둘은 상대방이 가진 자원을 무한정 기다리다가 결국 실행을 못 하게 되는데, 이가 교착 상태이다.
- 이러한 교착 상태를 해결하기 위해선 교착 상태가 발생했을 때의 상황을 정확히 표현해보고, 교착 상태가 일어나는 근본적인 이유에 대해 알아야 한다.